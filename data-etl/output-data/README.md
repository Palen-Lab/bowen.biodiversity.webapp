# Output Data Catalog

This directory contains processed spatial datasets ready for use in the web application and further analysis.

## Directory Structure

```
output-data/
├── bowen_mask.tif              # Study area analysis mask
├── bowen_sdm/                  # Species distribution models (193 species)
├── bowen_habitats/             # Habitat extent layers (~50 layers)
├── zonation/                   # Conservation prioritization outputs
├── threats/                    # Threat assessment layers
└── web_app/                    # Final data for web application
```

## Datasets

### Analysis Mask
- **File**: `bowen_mask.tif`
- **Description**: Binary raster defining the study area (land pixels only)
- **Resolution**: 100m x 100m
- **CRS**: Custom BC Albers (see `project_crs`)
- **Values**: 1 = analysis area, NA = water/excluded
- **Generated by**: `data-raw/scripts/01_setup/03_bowen_mask.R`

### Species Distribution Models
- **Folder**: `bowen_sdm/`
- **Count**: 193 species rasters
- **Format**: GeoTIFF (.tif)
- **Resolution**: 100m x 100m
- **Values**: 0-1 (habitat suitability probability)
- **Taxa**: Mammals, birds, reptiles, amphibians
- **Generated by**: `data-raw/scripts/03_species/01_process_sdm.R`
- **Naming**: `{Genus}_{species}.tif` (e.g., `Ursus_americanus.tif`)

### Habitat Layers
- **Folder**: `bowen_habitats/`
- **Count**: ~50 layers
- **Format**: GeoTIFF (.tif)
- **Resolution**: 100m x 100m
- **Values**: Binary (1 = present, 0/NA = absent) or continuous
- **Types**:
  - TEM ecosystem types (20+ layers)
  - Forest age classes (old, mature, young)
  - Wetlands (bogs, swamps, marshes, fens)
  - Streams and riparian zones
  - Coastal and intertidal habitats
  - Special features (heron colonies, etc.)
- **Generated by**: `data-raw/scripts/04_habitats/`

### Zonation Outputs
- **Folder**: `zonation/`
- **Key Files**:
  - `rankmap.tif` - Conservation priority values (0-1, continuous)
  - `top10pct.tif` - Top 10% priority areas (binary)
  - `top20pct.tif` - Top 20% priority areas (binary)
  - `top30pct.tif` - Top 30% priority areas (binary)
  - `*.dat`, `*.txt` - Zonation result files (performance curves, stats)
- **Resolution**: 100m x 100m
- **Notes**: 1 = highest priority, 0 = lowest priority
- **Generated by**: `data-raw/scripts/05_zonation/01_run_zonation.R`

### Threat Layers
- **Folder**: `threats/`
- **Files**:
  - `development_potential.tif` - Developable land index
  - `fire_risk.tif` - Wildfire vulnerability
  - `human_disturbance.tif` - Human footprint (0-1 scale, 0 = high disturbance)
  - `climate_projections/` - Climate change scenarios
- **Resolution**: 100m x 100m
- **Generated by**: `data-raw/scripts/06_threats/`

### Web Application Data
- **Folder**: `web_app/`
- **Format**: GeoJSON, simplified geometries for web performance
- **Files**:
  - Vector layers for protected areas, boundaries, roads
  - Simplified versions of key rasters
  - Metadata JSON files
- **Generated by**: Various scripts + web app preprocessing

## Data Flow

```
data-raw/          →  [ETL scripts]  →  output-data/       →  Web App
├── SDMs (341)         Process            ├── SDMs (193)       Display
├── TEM                Rasterize          ├── Habitats         Analyze
├── SEI                Zonation           ├── Priorities       Download
└── Threats            Export             └── Threats
```

## File Naming Conventions

- **Species**: `{Genus}_{species}.tif` (e.g., `Lynx_canadensis.tif`)
- **Habitats**: `habitat_{type}_{subtype}.tif` (e.g., `habitat_TEM_CF01.tif`)
- **Threats**: `threat_{category}.tif` (e.g., `threat_development.tif`)
- **Zonation**: `zonation_{output}.tif` (e.g., `zonation_rankmap.tif`)

## Data Usage

### In R
```r
library(terra)

# Load conservation priority map
priorities <- rast("output-data/zonation/rankmap.tif")

# Load species distribution
bear <- rast("output-data/bowen_sdm/Ursus_americanus.tif")

# Load habitat
old_forest <- rast("output-data/bowen_habitats/habitat_forest_old.tif")
```

### In Web Application
See web app documentation for API endpoints and data access methods.

## Data Quality Notes

- All rasters aligned to same grid (100m resolution, custom BC Albers CRS)
- NoData values consistently handled (NA or -9999)
- All data clipped to Bowen Island boundary
- Species layers validated against iNaturalist/eBird observations
- Habitat layers cross-checked with multiple sources

## Updates

To regenerate output data:
1. Ensure raw data is up-to-date (see `data-raw/README.md`)
2. Run relevant scripts in `data-raw/scripts/`
3. Or run full pipeline with `source("00_run_all.R")`

## Storage

- **Size**: ~2-5 GB (varies with SDM count)
- **Backup**: External storage recommended
- **Git**: Most files excluded from git (`.gitignore`) due to size
- **Sharing**: Use Zenodo, Dryad, or institutional repository for data publication
